<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>{{ page.title }} | {{ site.title }}</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
{% seo %}

<style>
/* ===== RESET & BASE ===== */
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:#f3f4f6;color:#111;line-height:1.6;}

/* ===== HEADER ===== */
.header{background:#fff;padding:15px 5%;position:sticky;top:0;z-index:999;box-shadow:0 2px 15px rgba(0,0,0,0.06);}
.header-inner{display:flex;align-items:center;justify-content:space-between;position:relative;}
.logo{font-size:22px;font-weight:900;color:#166534;text-decoration:none;}
.nav{display:flex;gap:20px;}
.nav a{text-decoration:none;font-size:14px;font-weight:700;color:#222;transition:0.3s;}
.nav a:hover{color:#166534;}
.right-icons{display:flex;gap:20px;align-items:center;}
.icon-btn{width:24px;height:24px;cursor:pointer;fill:none;stroke:#111;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;}

/* ===== GLOBAL SEARCH POPUP ===== */
#searchModal {
  position:fixed;top:0;left:0;width:100%;height:100%;
  background:rgba(15,23,42,0.8);backdrop-filter:blur(8px);
  display:none;justify-content:center;align-items:flex-start;
  z-index:10000;padding-top:100px;
}
.search-box {
  width:90%;max-width:650px;background:#fff;border-radius:16px;
  overflow:hidden;box-shadow:0 25px 50px rgba(0,0,0,0.3);
}
.search-input-area {display:flex;align-items:center;padding:18px;border-bottom:1px solid #eee;}
.search-input-area input {flex:1;border:none;outline:none;font-size:18px;font-weight:500;}
.close-modal {cursor:pointer;font-size:20px;color:#64748b;margin-left:15px;font-weight:bold;}
#searchResults {max-height:400px;overflow-y:auto;padding:10px;}
.result-item {
  display:flex;gap:15px;padding:12px;border-radius:10px;
  text-decoration:none;color:inherit;align-items:center;border-bottom:1px solid #f1f5f9;
}
.result-item:hover {background:#f8fafc;}
.result-item img {width:60px;height:45px;border-radius:6px;object-fit:cover;}
.result-item h4 {font-size:15px;color:#166534;margin-bottom:2px;}
.result-item p {font-size:12px;color:#64748b;}

/* ===== MOBILE MENU ===== */
.mobile-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.4);display:none;z-index:1000;}
.mobile-overlay.active{display:block}
.mobile-menu{position:fixed;top:0;left:-100%;width:70%;height:100%;background:#fff;padding:25px;transition:.4s;z-index:1001;}
.mobile-menu.active{left:0}
.mobile-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;font-weight:900;font-size:20px;color:#166534;}
.mobile-nav{display:flex;flex-direction:column;gap:20px;}
.mobile-nav a{text-decoration:none;font-weight:700;color:#222;font-size:16px;}

/* ===== HERO & SECTIONS ===== */
.tc-hero{padding:80px 5%;background:#fff;border-bottom:1px solid #e5e7eb;}
.tc-hero h1{font-size:42px;font-weight:900;margin-bottom:15px;}
.tc-hero p{color:#64748b;font-size:18px;margin-bottom:25px;}
.btn{padding:10px 22px;border-radius:8px;text-decoration:none;font-weight:700;display:inline-block;margin-right:10px;}
.btn-primary{background:#166534;color:#fff;}
.btn-outline{border:2px solid #166534;color:#166534;}

.tc-featured, .tc-tools{padding:60px 5%;}
.featured-grid, .tools-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-top:25px;}
.card{background:#fff;padding:25px;border-radius:12px;border:1px solid #e5e7eb;text-align:center;font-weight:700;transition:0.3s;cursor:pointer;}
.card:hover{transform:translateY(-5px);box-shadow:0 10px 25px rgba(0,0,0,0.05);border-color:#166534;}

/* ===== MAIN WRAPPER ===== */
.tc-wrapper{display:grid;grid-template-columns:3fr 1fr;gap:40px;padding:60px 5%;}
.tc-sidebar .box{background:#fff;padding:20px;border-radius:12px;border:1px solid #e5e7eb;margin-bottom:20px;font-weight:700;}

/* ===== FOOTER ===== */
.tc-footer{background:#fff;padding:60px 5%;border-top:1px solid #e5e7eb;}
.footer-grid{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:30px;}
.footer-bottom{text-align:center;margin-top:50px;font-size:14px;color:#64748b;border-top:1px solid #eee;padding-top:20px;}

/* ===== MOBILE RESPONSIVE ===== */
@media(max-width:900px){
  .nav{display:none;}
  .tc-wrapper, .footer-grid{grid-template-columns:1fr;}
  .tc-hero h1{font-size:32px;}
}
</style>
</head>

<body>

<header class="header">
  <div class="header-inner">
    <a href="{{ '/' | relative_url }}" class="logo">TYAGI CORE</a>
    <nav class="nav">
      <a href="{{ '/' | relative_url }}">Home</a>
      <a href="#">Networking</a>
      <a href="#">Cyber</a>
      <a href="#">AI</a>
      <a href="#">Linux</a>
      <a href="#">Privacy</a>
      <a href="#">Cloud</a>
    </nav>
    <div class="right-icons">
      <svg class="icon-btn" onclick="toggleSearch(true)" viewBox="0 0 24 24"><circle cx="11" cy="11" r="7"></circle><line x1="16.5" y1="16.5" x2="21" y2="21"></line></svg>
      <svg class="icon-btn hamburger" onclick="toggleMenu(true)" viewBox="0 0 24 24"><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
    </div>
  </div>
</header>

<div id="searchModal" onclick="closeOnOverlay(event)">
  <div class="search-box">
    <div class="search-input-area">
      <input type="text" id="searchInput" placeholder="Search articles (fuzzy)..." onkeyup="globalSearch()">
      <span class="close-modal" onclick="toggleSearch(false)">✕</span>
    </div>
    <div id="searchResults">
      <p style="text-align:center; padding:20px; color:#94a3b8;">Start typing to search...</p>
    </div>
  </div>
</div>

<div class="mobile-overlay" onclick="toggleMenu(false)"></div>
<div class="mobile-menu">
  <div class="mobile-header">TYAGI CORE <span onclick="toggleMenu(false)" style="cursor:pointer;">✕</span></div>
  <div class="mobile-nav">
    <a href="{{ '/' | relative_url }}">Home</a>
    <a href="#">Networking</a>
    <a href="#">Cyber</a>
    <a href="#">AI</a>
    <a href="#">Linux</a>
    <a href="#">Privacy</a>
  </div>
</div>

{% if page.url == "/" or page.url == "/TyagiCore/" %}
<section class="tc-hero">
  <h1>Build Real Tech From Scratch</h1>
  <p>Practical guides & projects to master the tech world</p>
  <a href="#" class="btn btn-primary">Learn Now</a>
  <a href="#" class="btn btn-outline">Explore Projects</a>
</section>

<section class="tc-featured">
  <h2>Featured Categories</h2>
  <div class="featured-grid">
    <div class="card">Web Development</div>
    <div class="card">App Development</div>
    <div class="card">Server & Hosting</div>
    <div class="card">3D / Systems</div>
  </div>
</section>
{% endif %}

<main class="tc-wrapper">
  <div class="tc-left">
    {{ content }}
  </div>
  <aside class="tc-sidebar">
    <div class="box">Popular Posts</div>
    <div class="box">Categories</div>
    <div class="box">Subscribe</div>
    <div class="box">Join Telegram</div>
  </aside>
</main>

{% if page.url == "/" or page.url == "/TyagiCore/" %}
<section class="tc-tools">
  <h2>Tools & Projects</h2>
  <div class="tools-grid">
    <div class="card">Mini Projects</div>
    <div class="card">Free Tools</div>
    <div class="card">Downloads</div>
    <div class="card">Code Snippets</div>
  </div>
</section>
{% endif %}

<footer class="tc-footer">
  <div class="footer-grid">
    <div><h3>About Tyagi Core</h3><p>Innovation and education without limits. Deep tech insights for everyone.</p></div>
    <div><h4>About</h4><p>Contact</p><p>Privacy Policy</p></div>
    <div><h4>Categories</h4><p>Cyber Security</p><p>System Design</p></div>
    <div><h4>Social</h4><p>Telegram</p><p>GitHub</p></div>
  </div>
  <div class="footer-bottom">
    <p>© {{ site.time | date: "%Y" }} {{ site.title }}. All rights reserved.</p>
  </div>
</footer>

<script>
// 1. DATA BINDING
const allPosts = [
  {% assign post_pages = site.pages | where: "is_post", true %}
  {% for p in post_pages %}
  {
    title: {{ p.title | jsonify }},
    url: {{ p.url | relative_url | jsonify }},
    excerpt: {{ p.description | default: p.excerpt | strip_html | truncate: 100 | jsonify }},
    image: "{{ p.image | default: 'https://picsum.photos/200/150' }}"
  }{% unless forloop.last %},{% endunless %}
  {% endfor %}
];

// 2. SEARCH LOGIC
function globalSearch() {
  const query = document.getElementById("searchInput").value.toLowerCase();
  const resCont = document.getElementById("searchResults");
  if (query.length < 2) { resCont.innerHTML = '<p style="text-align:center;padding:20px;color:#999;">Type 2+ letters...</p>'; return; }

  const filtered = allPosts.filter(p => p.title.toLowerCase().includes(query) || p.excerpt.toLowerCase().includes(query));
  resCont.innerHTML = filtered.length ? "" : '<p style="text-align:center;padding:20px;">No results found.</p>';
  
  filtered.forEach(p => {
    resCont.innerHTML += `<a href="${p.url}" class="result-item"><img src="${p.image}"><div><h4>${p.title}</h4><p>${p.excerpt}</p></div></a>`;
  });
}

// 3. UI TOGGLES
function toggleSearch(s) {
  document.getElementById("searchModal").style.display = s ? "flex" : "none";
  if(s) document.getElementById("searchInput").focus();
}
function toggleMenu(s) {
  document.querySelector(".mobile-menu").classList.toggle("active", s);
  document.querySelector(".mobile-overlay").classList.toggle("active", s);
}
function closeOnOverlay(e) { if(e.target.id === "searchModal") toggleSearch(false); }
document.addEventListener('keydown', (e) => { if(e.key === "Escape") toggleSearch(false); });
</script>

</body>
</html>
